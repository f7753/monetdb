<?xml version="1.0"?>
<!--

  Build file to allow ant (http://jakarta.apache.org/ant/) to be used
  to build and run the tests

-->

<project name="JDBCTests" default="run" basedir=".">

  <!-- set global properties for this build -->
  <property name="srcdir"    value="." />
  <property name="builddir"  value="build" />
  <property name="driverjar" value="../jars/MonetJDBC.jar" />


  <!-- Prepares the build directory -->
  <target name="prepare">
    <mkdir dir="${builddir}" />
  </target>

  <!-- Compiles the tests -->
  <target name="compile" depends="prepare">
    <echo message="Compiling JDBC tests" />
    <javac srcdir="${srcdir}" destdir="${builddir}">
       <include name="*.java" />
       <classpath>
         <pathelement path="${srcdir}" />
       </classpath>
    </javac>
  </target>

  <!-- Runs the tests -->
  <target name="run" depends="compile">
    <echo message="Running JDBC tests" />
    <path id="run.classpath">
      <pathelement path="${builddir}" />
      <pathelement location="${driverjar}" />
    </path>
    <echo message="${builddir} ${driverjar}" />
    <java classname="Test_Cautocommit" classpathref="run.classpath" />
    <java classname="Test_Csavepoints" classpathref="run.classpath" />
    <java classname="Test_PStimedate" classpathref="run.classpath" />
    <java classname="Test_RSpositioning" classpathref="run.classpath" />
    <java classname="Test_Rbooleans" classpathref="run.classpath" />
    <java classname="Test_Rtimedate" classpathref="run.classpath" />
  </target>

  <!-- This target removes the build directory -->
  <target name="clean">
    <delete quiet="true" dir="${builddir}" />
  </target>

</project>
