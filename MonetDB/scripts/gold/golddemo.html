<!--
The contents of this file are subject to the MonetDB Public
License Version 1.0 (the "License"); you may not use this file
except in compliance with the License. You may obtain a copy of
the License at
http://monetdb.cwi.nl/Legal/MonetDBLicense-1.0.html

Software distributed under the License is distributed on an "AS
IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
implied. See the License for the specific language governing
rights and limitations under the License.

The Original Code is the Monet Database System.

The Initial Developer of the Original Code is CWI.
Portions created by CWI are Copyright (C) 1997-2004 CWI.
All Rights Reserved.
-->

<h2> The Gold Demo Database</h2> <p>
MonetDB has played a pivotal role in the development of datamining
applications at DataDistilleries (now SPSS).
During its course of development we used a small mock-up database
to study performance issues.
This database is included in the distribution directory scripts/gold
and provides an easy way to explore some of the MonetDB's functionality
when it comes to processing MIL queries.
The steps below should help you understand some of the basics in
using MonetDB.
</p>
<h4>Creating the database:</h4> <p>
We suppose you have configured and successfully installed MonetDB
in a directory $MONETDB_PREFIX. 
Make sure $MONETDB_PREFIX/bin is in your PATH and type:
<pre>
$ mkdir $MONETDB_PREFIX/var/MonetDB/dbfarm/gold
</pre>
So, creating a database is nothing more than creating a directory in the 
'dbfarm' directory (the default dbfarm is $MONETDB_PREFIX/var/MonetDB/dbfarm)
This manual step is only meant as an illustration, because when the
environment variables are set, typing the following would produce
the same effects and produces a message that the database has been initialized.
<pre>
$ Mserver --dbname=gold
# Monet Database Server V4.3.17
# Copyright (c) 1993-2004, CWI. All rights reserved.
# Compiled for i686-pc-linux-gnu/32bit; dynamically linked.
# Visit http://monetdb.cwi.nl for further information.
monet&gt;
</pre>
Note that the actual output may differ slightly, depending on
the version downloaded and the system it runs on.
A different dbfarm location can be chosen and passed to
Mserver with the --dbfarm=&lt;dir&gt; command line switch.
</p>
<h4>Loading the database:</h4> <p>
A small MIL script is provided to quickly populate the database.
It uses a compressed file with tuples to be inserted and a format
file for the database loader.
<pre>
$ export TSTTRGDIR=`pwd`
$ Mserver --dbname=gold &lt; load.mil
</pre>
</p>
<h4>Create two supporting tables:</h4>
<p>
The database is now loaded. A few more tables are constructed
for subsequent processing. 
Don't disturb the output layout, because this script is
also used every night as part of the intensive testing machinery.
It suffices to note that we now have a skewed insurance
database with 100K entries, half of which with claimed damage.
<pre>
$ Mserver --dbname=gold &lt; init.mil
</pre>
</p>
<h4>Running the experiment:</h4>
<p>
With all pieces in place we can run an experiment.
The queries illustrate what would be produced by an
end-user mining for gold at a single button click.
The file tst100.mil provides an outlook on the 
proprietary query language of MonetDB.
The timing for each datamining step is summarized.
This query sequence was originally generated by the
Data Distilleries application front-end.
<pre>
$ Mserver --dbname=gold tst100.mil &gt;output
$ sh summary
</pre>
<p>
<h3>Virtual OID Demo</h3>
<p>
A key feature to gain tremendous speed in this application domain
is the ability to deal with virtual OIDs. They do not require
storage space, but can be used to speed up processing significantly.
In order to use the virtual oid features, first create a vectorized 
database with the void.mil script. Make sure that you have the 
'str' and 'enum' modules installed!
<pre>
$ Mserver --dbname=gold &lt; void.mil
$ Mserver --dbname=gold tstvoid.mil >output
$ sh summary
</pre>
It will run somewhat faster..
</p>

