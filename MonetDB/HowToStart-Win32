This document will help you compile and install Monet. Once you have
done that successfully, refer to doc\monet.html for the user
documentation that will have been generated by then.

This document assumes that you are planning to compile and install Monet
on a naive Windows system (NT, 2000, XP). For compilation and
installation on a Unix system (e.g., Linux, IRIX, Solaris, AIX, or
CYGWIN) see the instructions in the file 'HowToStart'.


Prerequisites:
==============

CVS
	You need to have a working CVS.  For instructions, see
	http://sourceforge.net/docman/?group_id=1 and look under the
	heading CVS Instructions.

Python
	MonetDB uses Python (version 1.5.2 or better) during
	configuration of the software.  See http://www.python.org/ for
	more information.

Pthreads for Win32
	(ftp://sources.redhat.com/pub/pthreads-win32/)
	Pthreads should be installed to C:\Pthreads, otherwise you need
	to patch the "PTHREAD = C:\Pthreads" line in "NT\rules.msc"
	according to your setup.

UnxUtils for Win32
	(http://UnxUtils.sourceforge.net/)
	UnxUtils must be installed in the root directory of the drive
	where you what to compile MonetDB.
	(Next to some tools used during testing, UnxUtils also provide
	the lexical analyzer generator "flex" and the parser generator
	"bison", which are required to compile MonetDB.)
	
Microsoft Visual C++
	You need Microsoft Visual C++ 5 or higher.

	Notice that if you do not own Microsoft Visual C++, you can
	still compile on Windows using the Cygnus Posix-emulation
	environment "CYGWIN" (http://www.cygwin.com). In that case, you
	should follow the standard instructions in the file
	'HowToStart'. Alternatively, it might be possible to use the
	free WIN32-GNU compilers (http://www.mingw.org/index.shtml) as a
	drop-in replacement for the Microsoft tools, but we have not
	tried this yet.

disk space
	After downloading, MonetDB takes up about 45 MB of disk space;
	compilation adds another 30 MB.  Testing takes about 150 MB, and
	the installation about 10 MB (not including any databases).


Getting the Software:
=====================

This command should be done once.  It records a password on the local
machine to be used for all subsequent CVS accesses with this server.

 cvs -d:pserver:anonymous@cvs.monetdb.sourceforge.net:/cvsroot/monetdb login

Just type RETURN when asked for the password.

Then get the software by using the command:

 cvs -d:pserver:anonymous@cvs.monetdb.sourceforge.net:/cvsroot/monetdb login checkout MonetDB

This will create a directory MonetDB in your current working directory.

Also see http://sourceforge.net/cvs/?group_id=56967 for more
information.


Compiling:
==========

Make sure that the proper environment for MSVC++ is set
(see C:\Program Files\Microsoft Visual Studio\VC98\Bin\VCVARS32.BAT).

Make sure that Python, C:\Pthreads\lib (or wherever you installed
Pthreads), and \usr\local\wbin are in the PATH of your command shell.

Open a command shell and go to the top-level directory of MonetDB.
There, you type

 cd NT
 nmake

to compile the source code.


Testing the Build:
==================

If nmake went successfully, you can try

 nmake check

This will do a lot of tests, some are unfortunately still expected to
fail, but most should go successfully.  At the end of the output there
is a reference to an HTML file which is created by the test process and
shows the test results.  An explanation of the test results can be found
in XXX--to be filled in.

Testing takes about 150 MB of disk space in the build directory.


Installing:
===========

Give the command

 nmake install

By default this will install MonetDB to <sourcedir>\NT\ where
<sourcedir> is the top-level directory of MonetDB source tree.
The current version does not provide any means to change this default.


Testing the Installation:
=========================

Make sure that <sourcedir>\NT\bin, <sourcedir>\NT\lib, and
<sourcedir>\NT\lib\MonetDB are in your PATH.

In the MonetDB top-level directory issue the command

 Mtest.py -r

(Make sure Mtest.py can be found, it should be in the bin directory that
was filled by the nmake install command.)

This should produce much the same output as nmake check above, but uses
the installed version of MonetDB.


Documentation:
==============

The documentation starts in <sourcedir>\NT\doc\monet.html

NOTE: the current 'nmake install' does not yet generate this
      documentation to do this manually, execute *after* successful
      'nmake install'. In the top-level directory of the MonetDB build
      tree, call

 nmake html
