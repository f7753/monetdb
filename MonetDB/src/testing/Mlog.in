#!@BASH@

THIS=$0
THISDIR=${0%/*}
THISFILE=${0##*/}

#############################################################################
#	FUNCTIONS

function LOG1 () { prompt="\n# `date +%H:%M:%S` >  " ; echo -en "$prompt$prompt$*$prompt\n\n" >&2 ; }
function LOG2 () { LOG1 $* 2>&1 ; LOG1 $* ; }
 
function LOG1x () { LOG1 $* ; "$@" ; }
function LOG2x () { LOG2 $* ; "$@" ; }

#############################################################################
#	MAIN

ACTION=LOG2
while :; do
	case "$1" in
	-1)		ACTION=LOG1;;
	-1x | -x1)	ACTION=LOG1x;;
	-x | -2x | -x2)	ACTION=LOG2x;;
	-*)		;;
	*)		break;;
	esac
	shift
done

eval $ACTION "$@"

#	END
#############################################################################
