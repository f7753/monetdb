@f unix
@t Unix standard library calls
@a Tim Ruhl
@v 0.1

@T 
@* Unix stdlib

Provides access to some of the C stdlib.h functions. 

@* Module Definition
@m
.MODULE unix;

.COMMAND getenv(str) : str = unix_getenv;
  "Get the environment variable string."
.COMMAND setenv(str,str) : bit = unix_setenv;
  "Set the environment variable string."
.COMMAND system(str) : int = unix_system;
  "execute a command and give back the return value"

.END unix;

@c
#include "unix.proto.h"
#include <stdlib.h>

int 
unix_getenv(str *res, str varname)
{
	char *p = getenv(varname);
	if (p) {
		*res = GDKstrdup(p);
	} else {
		*res = GDKstrdup("");
	}
	return GDK_SUCCEED;
}

int 
unix_setenv(bit *res, str varname, str valname)
{
	*res = setenv(varname, valname, TRUE);
	return GDK_SUCCEED;
}

int 
unix_system(int *res, str command)
{
	*res = system(command);
	return GDK_SUCCEED;
}


/*
Local Variables:
c-basic-offset: 4
End:
*/


