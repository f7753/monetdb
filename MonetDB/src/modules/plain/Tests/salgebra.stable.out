stdout of test 'salgebra` in directory 'src/modules/plain` itself:

#> Mtest (20:34:28):	other salgebra 1200
#> Mtest (20:34:28):	Mtimeout -timeout 1200 ./salgebra salgebra
#> Mlog (20:34:28):	Mtimeout -timeout 600 Mserver -modulesilent -yaccsilent -d8 -db src_modules_plain salgebra.mil
# Monet Database Server V4.2
# Copyright (c) 1993-1999, CWI & SION. All rights reserved.
# compiled for i686-pc-linux-gnu/32bit.
#script:salgebra.mil

loaded;
#---------------------------------#
# module	| usage_count	  #
#---------------------------------#
[ "algebra",	  1		  ]
[ "arith",	  1		  ]
[ "bat",	  1		  ]
[ "kernel",	  1		  ]
[ "str",	  1		  ]
[ "sys",	  1		  ]
[ "trans",	  1		  ]

Try: modules;                - for other modules.
     ls;                     - for persistent bat listing.
     sigs("<module>")        - for available commands per module.
     help("<command>")       - for help one-liner for a command.

#You are system administrator (adm)!

#line 1070 "../../../../src/modules/plain/salgebra.mx"



ti := new( void, oid );
ti.insert( nil, 0@0 );
ti.insert( nil, 3@0 );
ti.insert( nil, 0@0 );
ti.insert( nil, 2@0 );
ti.insert( nil, 3@0 );
ti.seqbase( 0@0 );
ti.rename( "ti" );

ch := clusterhash( ti );
!WARNING: Building clusterhash
ch.rename( "ti" );
printf( "Created clusterhash %s\n", str(ch) );
Created clusterhash ti

ch_2 := clusterhash( "ti" );
ch_2.info.print;
#-------------------------#
# BAT:		  tmp_41  #
# (str)		  (str)	  #
#-------------------------#
[ "name",	  "ti"	  ]
[ "bname",	  "ti"	  ]
[ "ttype",	  "oid"	  ]
[ "batId",	  "39"	  ]
[ "perfect",	  "1"	  ]
[ "refCnt",	  "3"	  ]
ch_2 := nil;

tj := new( oid, str );
tj.rename( "tj" );
tj.insert( 2@0, "two" );
tj.insert( 3@0, "three" );

#ch2 := clusterhash( tj.mark(nil).reverse );
#ch2.rename("tjrev");

ch.info.print;
#-------------------------#
# BAT:		  tmp_42  #
# (str)		  (str)	  #
#-------------------------#
[ "name",	  "ti"	  ]
[ "bname",	  "ti"	  ]
[ "ttype",	  "oid"	  ]
[ "batId",	  "39"	  ]
[ "perfect",	  "1"	  ]
[ "refCnt",	  "2"	  ]
#ch2.info.print;

CHdir();
#---------------------------------------------------------#
# BAT:	  ch_namecache	| ch_refcnt	| ch_cache	  #
# (int)	  (str)		| (int)		| (clusterhash)	  #
#---------------------------------------------------------#
[ 39,	  "ti",		  2,		  ti		  ]

# use the clusterhash for a uselect or a ujoin
uselect( ch, 0@0 ).print;
#-----------------#
# BAT:	  tmp_42  #
# (oid)	  (void)  #
#-----------------#
[ 0@0,	  nil	  ]
[ 2@0,	  nil	  ]
uselect( ch, 1@0 ).print;
#-----------------#
# BAT:	  tmp_42  #
# (oid)	  (void)  #
#-----------------#
uselect( ch, 2@0 ).print;
#-----------------#
# BAT:	  tmp_42  #
# (oid)	  (void)  #
#-----------------#
[ 3@0,	  nil	  ]
uselect( ch, 3@0 ).print;
#-----------------#
# BAT:	  tmp_42  #
# (oid)	  (void)  #
#-----------------#
[ 1@0,	  nil	  ]
[ 4@0,	  nil	  ]

ujoin( ch, tj ).print;
#-----------------#
# BAT:	  tmp_42  #
# (oid)	  (void)  #
#-----------------#
[ 3@0,	  nil	  ]
[ 1@0,	  nil	  ]
[ 4@0,	  nil	  ]
usortedjoin( ch, tj ).print;
#-----------------#
# BAT:	  tmp_42  #
# (oid)	  (void)  #
#-----------------#
[ 1@0,	  nil	  ]
[ 3@0,	  nil	  ]
[ 4@0,	  nil	  ]

CHdir();
#---------------------------------------------------------#
# BAT:	  ch_namecache	| ch_refcnt	| ch_cache	  #
# (int)	  (str)		| (int)		| (clusterhash)	  #
#---------------------------------------------------------#
[ 39,	  "ti",		  2,		  ti		  ]

ch := nil;
drop( "salgebra" );

quit;
#move bat/BBP.dir bat/BACKUP/BBP.dir = 0 (0ms)
