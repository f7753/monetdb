#!@BASH@

THIS=$0
THISDIR=${0%/*}
THISFILE=${0##*/}

#############################################################################
#	FUNCTIONS

function LOG1 () { echo -e "#> ${0##*/} (`date +%H:%M:%S`):\t$*" >&2 ; }
function LOG2 () { LOG1 $* 2>&1 ; LOG1 $* ; }
 
function LOG1x () { LOG1 $* ; "$@" ; }
function LOG2x () { LOG2 $* ; "$@" ; }

#############################################################################
#	MAIN

ACTION=LOG2
while [ "$1" != "${1#-}" ] ; do
	if     [ "$1" = "-1"                                  ] ; then  ACTION=LOG1
	  elif [ "$1" = "-1x" -o "$1" = "-x1"                 ] ; then  ACTION=LOG1x
	  elif [ "$1" = "-x"  -o "$1" = "-2x" -o "$1" = "-x2" ] ; then  ACTION=LOG2x
	fi
	shift
done

$ACTION "$@"

#	END
#############################################################################
