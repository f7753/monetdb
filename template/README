
This directory contains the nessesary configure files and scripts to
build a simple template module (src/template.mx) for the monet database engine.

Before continuing find (or compile) a monet version 4.3.14 or higher.

Add the bin-directory where monet-config is located to your path. 

run bootstrap in the top directory
mkdir $ARCH
cd $ARCH
../configure --prefix=`pwd` 
gmake -j
gmake install

add the modules directory ($prefix/lib/example) to your monet_mod_path in
your monet config file

Read the monet manual for creating a database and starting a monet server

Mserver --dbname template
module(template);


---- In practice  ----

Obviously, this generates a configured template directory.
Some dependencies exist that you'd better change manually now.

First, the template assumes there is a file src/template.mx; which should
identify this package uniquely from the AC_INIT clause in configure.ag.
Similarly, it produces a template_config.h with additional includes.

Change those to your preferences by:
  1. Edit AC_INIT, AM_INIT_AUTOMAKE and AM_CONFIG_HEADER in configure.ag with setup
     information for your own module
  2. Edit the EXTRA_HEADERS line in Makefile.ag  accordingly
  3. Optionally, add a call to additional m4 scripts, and copy those into the conf dir
     (e.g., if a library interfaces to a separately developed library, such as GSL).

---- Usage trick: ----

To get an existing directory setup with these files, 
e.g. MODDEVDIR=/ufs/arjen/src/CWITV/monet/array,
proceed as follows.
First, check out this template dir and cd into it (MODTDIR);
then do (in a bash-like shell):

  MODDEVDIR=/ufs/arjen/src/CWITV/monet/array
  MODTDIR=`pwd`

  find . -type d \( -name . -o -name CVS -prune -o \
    -exec echo /bin/mkdir -p ${MODDEVDIR}/{} \; \) > /tmp/t.sh
  find . \( -type d -name CVS -o -name example.mx -o -name README \) -prune  -o \
    -type f -exec echo /bin/cp -f --backup ${MODTDIR}/{} ${MODDEVDIR}/\`dirname {}\` \; >> /tmp/t.sh
  echo pushd ${MODDEVDIR} >> /tmp/t.sh
  find . -type d \( -name . -o -name CVS -prune -o \
    -exec echo cvs add {} \; \) >> /tmp/t.sh
  find . \( -type d -name CVS -o -name example.mx -o -name README \) -prune  -o \
    -type f -exec echo cvs add {} \; >> /tmp/t.sh
  echo popd >> /tmp/t.sh

Check the script manually, or just do it :)
  . /tmp/t.sh
If you had a Makefile.ag pre-existing in the src target dir, then it may be overwritten;
yet a copy is made thanks to the --backup flag used on cp, so do not worry!
