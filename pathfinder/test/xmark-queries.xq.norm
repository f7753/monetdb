xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($b),
             locpath
               (pred
                  (locpath (step (child, namet (person)),
                     dot ()),
                  eq
                    (locpath (step (attribute, namet (id)),
                       dot ()), lit_str ("person0"))),
               locpath (step (child, namet (people)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()), nil (), nil (),
       locpath (step (child, kindt (text, nil ())),
         locpath (step (child, namet (name)), varref ($b)))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($b),
             locpath (step (child, namet (open_auction)),
               locpath (step (child, namet (open_auctions)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()), nil (), nil (),
       elem (tag (increase),
         exprseq
           (locpath (step (child, kindt (text, nil ())),
              locpath (step (child, namet (increase)),
                locpath
                  (pred
                     (locpath (step (child, namet (bidder)),
                        dot ()), lit_int (1)), varref ($b)))),
           empty-seq ()))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($b),
             locpath (step (child, namet (open_auction)),
               locpath (step (child, namet (open_auctions)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()),
       le
         (mult
            (locpath (step (child, kindt (text, nil ())),
               locpath (step (child, namet (increase)),
                 locpath
                   (pred
                      (locpath
                         (step (child, namet (bidder)),
                         dot ()), lit_int (1)), varref ($b)))),
            lit_int (2)),
         locpath (step (child, kindt (text, nil ())),
           locpath (step (child, namet (increase)),
             locpath
               (pred
                  (locpath (step (child, namet (bidder)),
                     dot ()), fun_ref (last, nil ())),
               varref ($b))))), nil (),
       elem (tag (increase),
         exprseq
           (attr (tag (first),
              exprseq
                (locpath
                   (step (child, kindt (text, nil ())),
                   locpath (step (child, namet (increase)),
                     locpath
                       (pred
                          (locpath
                             (step (child, namet (bidder)),
                             dot ()), lit_int (1)),
                       varref ($b)))), empty-seq ())),
           exprseq
             (attr (tag (last),
                exprseq
                  (locpath
                     (step (child, kindt (text, nil ())),
                     locpath
                       (step (child, namet (increase)),
                       locpath
                         (pred
                            (locpath
                               (step (child,
                                  namet (bidder)), dot ()),
                            fun_ref (last, nil ())),
                         varref ($b)))), empty-seq ())),
             empty-seq ())))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($b),
             locpath (step (child, namet (open_auction)),
               locpath (step (child, namet (open_auctions)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()),
       ltlt
         (locpath
            (pred
               (locpath (step (child, namet (personref)),
                  dot ()),
               eq
                 (locpath (step (child, namet (id)),
                    dot ()), lit_str ("person18829"))),
            locpath (step (child, namet (bidder)),
              varref ($b))),
         locpath
           (pred
              (locpath (step (child, namet (personref)),
                 dot ()),
              eq
                (locpath (step (child, namet (id)), dot ()),
                lit_str ("person10487"))),
           locpath (step (child, namet (bidder)),
             varref ($b)))), nil (),
       elem (tag (history),
         exprseq
           (locpath (step (child, kindt (text, nil ())),
              locpath (step (child, namet (reserve)),
                varref ($b))), empty-seq ()))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (fun_ref (count,
       args
         (flwr
            (binds
               (bind (nil (), nil (), varref ($i),
                  locpath
                    (step (child, namet (closed_auction)),
                    locpath
                      (step (child,
                         namet (closed_auctions)),
                      locpath (step (child, namet (site)),
                        fun_ref (document,
                          args (lit_str ("auction.xml"),
                            nil ())))))), nil ()),
            ge
              (locpath (step (child, kindt (text, nil ())),
                 locpath (step (child, namet (price)),
                   varref ($i))), lit_int (40)), nil (),
            locpath (step (child, namet (price)),
              varref ($i))), nil ())), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($b),
             locpath (step (child, namet (regions)),
               locpath (step (child, namet (site)),
                 fun_ref (document,
                   args (lit_str ("auction.xml"), nil ()))))),
          nil ()), nil (), nil (),
       fun_ref (count,
         args
           (locpath (step (child, namet (item)),
              locpath
                (step (descendant-or-self,
                   kindt (node, nil ())), varref ($b))),
           nil ()))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($p),
             locpath (step (child, namet (site)),
               fun_ref (document,
                 args (lit_str ("auction.xml"), nil ())))),
          nil ()), nil (), nil (),
       flwr
         (binds
            (let (nil (), varref ($c1),
               fun_ref (count,
                 args
                   (locpath
                      (step (child, namet (description)),
                      locpath
                        (step (descendant-or-self,
                           kindt (node, nil ())),
                        varref ($p))), nil ()))), nil ()),
         nil (), nil (),
         flwr
           (binds
              (let (nil (), varref ($c2),
                 fun_ref (count,
                   args
                     (locpath (step (child, namet (mail)),
                        locpath
                          (step (descendant-or-self,
                             kindt (node, nil ())),
                          varref ($p))), nil ()))), nil ()),
           nil (), nil (),
           flwr
             (binds
                (let (nil (), varref ($c3),
                   fun_ref (count,
                     args
                       (locpath
                          (step (child, namet (email)),
                          locpath
                            (step (descendant-or-self,
                               kindt (node, nil ())),
                            varref ($p))), nil ()))),
                nil ()), nil (), nil (),
             flwr
               (binds
                  (let (nil (), varref ($sum),
                     plus
                       (plus (varref ($c1), varref ($c2)),
                       varref ($c3))), nil ()), nil (),
               nil (), varref ($sum)))))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($p),
             locpath (step (child, namet (person)),
               locpath (step (child, namet (people)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()), nil (), nil (),
       flwr
         (binds
            (let (nil (), varref ($a),
               flwr
                 (binds
                    (bind (nil (), nil (), varref ($t),
                       locpath
                         (step (child,
                            namet (closed_auction)),
                         locpath
                           (step (child,
                              namet (closed_auctions)),
                           locpath
                             (step (child, namet (site)),
                             fun_ref (document,
                               args
                                 (lit_str ("auction.xml"),
                                 nil ())))))), nil ()),
                 eq
                   (locpath
                      (step (attribute, namet (person)),
                      locpath (step (child, namet (buyer)),
                        varref ($t))),
                   locpath (step (attribute, namet (id)),
                     varref ($p))), nil (), varref ($t))),
            nil ()), nil (), nil (),
         elem (tag (item),
           exprseq
             (attr (tag (person),
                exprseq
                  (locpath
                     (step (child, kindt (text, nil ())),
                     locpath (step (child, namet (name)),
                       varref ($p))), empty-seq ())),
             exprseq
               (fun_ref (count, args (varref ($a), nil ())),
               empty-seq ()))))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($p),
             locpath (step (child, namet (person)),
               locpath (step (child, namet (people)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()), nil (), nil (),
       flwr
         (binds
            (let (nil (), varref ($a),
               flwr
                 (binds
                    (bind (nil (), nil (), varref ($t),
                       locpath
                         (step (child,
                            namet (closed_auction)),
                         locpath
                           (step (child,
                              namet (closed_auctions)),
                           locpath
                             (step (child, namet (site)),
                             fun_ref (document,
                               args
                                 (lit_str ("auction.xml"),
                                 nil ())))))), nil ()),
                 nil (), nil (),
                 flwr
                   (binds
                      (let (nil (), varref ($n),
                         flwr
                           (binds
                              (bind (nil (), nil (),
                                 varref ($t2),
                                 locpath
                                   (step (child,
                                      namet (item)),
                                   locpath
                                     (step (child,
                                        namet (europe)),
                                     locpath
                                       (step (child,
                                          namet (regions)),
                                       locpath
                                         (step (child,
                                            namet (site)),
                                         fun_ref (document,
                                           args
                                             (lit_str
                                                ("auction.xml"),
                                             nil ()))))))),
                              nil ()),
                           eq
                             (locpath
                                (step (attribute,
                                   namet (item)),
                                locpath
                                  (step (child,
                                     namet (itemref)),
                                  varref ($t))),
                             locpath
                               (step (attribute,
                                  namet (id)), varref ($t2))),
                           nil (), varref ($t2))), nil ()),
                   eq
                     (locpath (step (attribute, namet (id)),
                        varref ($p)),
                     locpath
                       (step (attribute, namet (person)),
                       locpath (step (child, namet (buyer)),
                         varref ($t)))), nil (),
                   elem (tag (item),
                     exprseq
                       (locpath
                          (step (child,
                             kindt (text, nil ())),
                          locpath
                            (step (child, namet (name)),
                            varref ($n))), empty-seq ()))))),
            nil ()), nil (), nil (),
         elem (tag (person),
           exprseq
             (attr (tag (name),
                exprseq
                  (locpath
                     (step (child, kindt (text, nil ())),
                     locpath (step (child, namet (name)),
                       varref ($p))), empty-seq ())),
             exprseq (varref ($a), empty-seq ()))))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($i),
             fun_ref (distinct-values,
               args
                 (locpath
                    (step (attribute, namet (category)),
                    locpath (step (child, namet (interest)),
                      locpath
                        (step (child, namet (profile)),
                        locpath
                          (step (child, namet (person)),
                          locpath
                            (step (child, namet (people)),
                            locpath
                              (step (child, namet (site)),
                              fun_ref (document,
                                args
                                  (lit_str ("auction.xml"),
                                  nil ())))))))), nil ()))),
          nil ()), nil (), nil (),
       flwr
         (binds
            (let (nil (), varref ($p),
               flwr
                 (binds
                    (bind (nil (), nil (), varref ($t),
                       locpath
                         (step (child, namet (person)),
                         locpath
                           (step (child, namet (people)),
                           locpath
                             (step (child, namet (site)),
                             fun_ref (document,
                               args
                                 (lit_str ("auction.xml"),
                                 nil ())))))), nil ()),
                 eq
                   (locpath
                      (step (attribute, namet (category)),
                      locpath
                        (step (child, namet (interest)),
                        locpath
                          (step (child, namet (profile)),
                          varref ($t)))), varref ($i)),
                 nil (),
                 elem (tag (personne),
                   exprseq
                     (elem (tag (statistiques),
                        exprseq
                          (elem (tag (sexe),
                             exprseq
                               (locpath
                                  (step (child,
                                     kindt (text, nil ())),
                                  locpath
                                    (step (child,
                                       namet (gender)),
                                    varref ($t))),
                               empty-seq ())),
                          exprseq
                            (text
                               (exprseq (lit_str (", "),
                                  empty-seq ())),
                            exprseq
                              (elem (tag (age),
                                 exprseq
                                   (locpath
                                      (step (child,
                                         kindt (text,
                                           nil ())),
                                      locpath
                                        (step (child,
                                           namet (age)),
                                        varref ($t))),
                                   empty-seq ())),
                              exprseq
                                (text
                                   (exprseq (lit_str (", "),
                                      empty-seq ())),
                                exprseq
                                  (elem (tag (education),
                                     exprseq
                                       (locpath
                                          (step (child,
                                             kindt (text,
                                               nil ())),
                                          locpath
                                            (step (child,
                                               namet
                                                 (education)),
                                            varref ($t))),
                                       empty-seq ())),
                                  exprseq
                                    (text
                                       (exprseq
                                          (lit_str (", "),
                                          empty-seq ())),
                                    exprseq
                                      (elem (tag (revenu),
                                         exprseq
                                           (locpath
                                              (step (child,
                                                 kindt
                                                   (text,
                                                   nil ())),
                                              locpath
                                                (step
                                                   (child,
                                                   namet
                                                     (income)),
                                                varref ($t))),
                                           empty-seq ())),
                                      empty-seq ())))))))),
                     exprseq
                       (text
                          (exprseq (lit_str (", "),
                             empty-seq ())),
                       exprseq
                         (elem (tag (coordonnees),
                            exprseq
                              (elem (tag (nom),
                                 exprseq
                                   (text
                                      (exprseq
                                         (lit_str
                                            ("
                                               $t/name/text()
                                               "),
                                         empty-seq ())),
                                   empty-seq ())),
                              exprseq
                                (text
                                   (exprseq (lit_str (", "),
                                      empty-seq ())),
                                exprseq
                                  (elem (tag (rue),
                                     exprseq
                                       (text
                                          (exprseq
                                             (lit_str
                                                ("
                                                   $t/street/text()
                                                   "),
                                             empty-seq ())),
                                       empty-seq ())),
                                  exprseq
                                    (text
                                       (exprseq
                                          (lit_str (", "),
                                          empty-seq ())),
                                    exprseq
                                      (elem (tag (ville),
                                         exprseq
                                           (text
                                              (exprseq
                                                 (lit_str
                                                    ("
                                                       $t/city/text()
                                                       "),
                                                 empty-seq
                                                   ())),
                                           empty-seq ())),
                                      exprseq
                                        (text
                                           (exprseq
                                              (lit_str
                                                 (", "),
                                              empty-seq ())),
                                        exprseq
                                          (elem (tag (pays),
                                             exprseq
                                               (text
                                                  (exprseq
                                                     (lit_str
                                                        ("
                                                           $t/country/text()
                                                           "),
                                                     empty-seq
                                                       ())),
                                               empty-seq ())),
                                          exprseq
                                            (text
                                               (exprseq
                                                  (lit_str
                                                     (", "),
                                                  empty-seq
                                                    ())),
                                            exprseq
                                              (elem
                                                 (tag
                                                    (reseau),
                                                 exprseq
                                                   (elem
                                                      (tag
                                                         (courrier),
                                                      exprseq
                                                        (text
                                                           (exprseq
                                                              (lit_str
                                                                 ("
                                                                    $t/email/text()
                                                                    "),
                                                              empty-seq
                                                                ())),
                                                        empty-seq
                                                          ())),
                                                   exprseq
                                                     (text
                                                        (exprseq
                                                           (lit_str
                                                              (",
                                                                 "),
                                                           empty-seq
                                                             ())),
                                                     exprseq
                                                       (elem
                                                          (tag
                                                             (pagePerso),
                                                          exprseq
                                                            (text
                                                               (exprseq
                                                                  (lit_str
                                                                     ("
                                                                        $t/homepage/text()"),
                                                                  empty-seq
                                                                    ())),
                                                            empty-seq
                                                              ())),
                                                       empty-seq
                                                         ())))),
                                              exprseq
                                                (text
                                                   (exprseq
                                                      (lit_str
                                                         (",
                                                            "),
                                                      empty-seq
                                                        ())),
                                                empty-seq ()))))))))))),
                         exprseq
                           (elem (tag (cartePaiement),
                              exprseq
                                (text
                                   (exprseq
                                      (lit_str
                                         ("
                                            $t/creditcard/text()"),
                                      empty-seq ())),
                                empty-seq ())),
                           empty-seq ()))))))), nil ()),
         nil (), nil (),
         elem (tag (categorie),
           exprseq
             (elem (tag (id),
                exprseq
                  (text
                     (exprseq (lit_str (" $i "),
                        empty-seq ())), empty-seq ())),
             exprseq
               (text
                  (exprseq (lit_str (", $p "), empty-seq ())),
               empty-seq ()))))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($p),
             locpath (step (child, namet (person)),
               locpath (step (child, namet (people)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()), nil (), nil (),
       flwr
         (binds
            (let (nil (), varref ($l),
               flwr
                 (binds
                    (bind (nil (), nil (), varref ($i),
                       locpath
                         (step (child, namet (initial)),
                         locpath
                           (step (child,
                              namet (open_auction)),
                           locpath
                             (step (child,
                                namet (open_auctions)),
                             locpath
                               (step (child, namet (site)),
                               fun_ref (document,
                                 args
                                   (lit_str ("auction.xml"),
                                   nil ()))))))), nil ()),
                 gt
                   (locpath
                      (step (attribute, namet (income)),
                      locpath
                        (step (child, namet (profile)),
                        varref ($p))),
                   exprseq
                     (mult (lit_int (5000),
                        locpath
                          (step (child,
                             kindt (text, nil ())),
                          varref ($i))), empty-seq ())),
                 nil (), varref ($i))), nil ()), nil (),
         nil (),
         elem (tag (items),
           exprseq
             (elem (tag (name),
                exprseq
                  (locpath
                     (step (child, kindt (text, nil ())),
                     locpath (step (child, namet (name)),
                       varref ($p))), empty-seq ())),
             exprseq
               (elem (tag (number),
                  exprseq
                    (fun_ref (count,
                       args (varref ($l), nil ())),
                    empty-seq ())), empty-seq ()))))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($p),
             locpath (step (child, namet (person)),
               locpath (step (child, namet (people)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()), nil (), nil (),
       flwr
         (binds
            (let (nil (), varref ($l),
               flwr
                 (binds
                    (bind (nil (), nil (), varref ($i),
                       locpath
                         (step (child, namet (initial)),
                         locpath
                           (step (child,
                              namet (open_auction)),
                           locpath
                             (step (child,
                                namet (open_auctions)),
                             locpath
                               (step (child, namet (site)),
                               fun_ref (document,
                                 args
                                   (lit_str ("auction.xml"),
                                   nil ()))))))), nil ()),
                 gt
                   (locpath
                      (step (attribute, namet (income)),
                      locpath
                        (step (child, namet (profile)),
                        varref ($p))),
                   exprseq
                     (mult (lit_int (5000),
                        locpath
                          (step (child,
                             kindt (text, nil ())),
                          varref ($i))), empty-seq ())),
                 nil (), varref ($i))), nil ()),
         gt
           (locpath (step (attribute, namet (income)),
              locpath (step (child, namet (profile)),
                varref ($p))), lit_int (50000)), nil (),
         elem (tag (items),
           exprseq
             (elem (tag (name),
                exprseq
                  (locpath
                     (step (child, kindt (text, nil ())),
                     locpath (step (child, namet (name)),
                       varref ($p))), empty-seq ())),
             exprseq
               (elem (tag (number),
                  exprseq
                    (fun_ref (count,
                       args (varref ($l), nil ())),
                    empty-seq ())), empty-seq ()))))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($i),
             locpath (step (child, namet (item)),
               locpath (step (child, namet (australia)),
                 locpath (step (child, namet (regions)),
                   locpath (step (child, namet (site)),
                     fun_ref (document,
                       args (lit_str ("auction.xml"),
                         nil ()))))))), nil ()), nil (),
       nil (),
       elem (tag (item),
         exprseq
           (elem (tag (name),
              exprseq
                (locpath
                   (step (child, kindt (text, nil ())),
                   locpath (step (child, namet (name)),
                     varref ($i))), empty-seq ())),
           exprseq
             (locpath (step (child, namet (description)),
                varref ($i)), empty-seq ())))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($i),
             locpath (step (child, namet (item)),
               locpath
                 (step (descendant-or-self,
                    kindt (node, nil ())),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()),
       fun_ref (contains,
         args
           (locpath (step (child, namet (description)),
              varref ($i)), args (lit_str ("gold"), nil ()))),
       nil (),
       locpath (step (child, kindt (text, nil ())),
         locpath (step (child, namet (name)), varref ($i)))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($a),
             locpath (step (child, kindt (text, nil ())),
               locpath (step (child, namet (keyword)),
                 locpath (step (child, namet (emph)),
                   locpath (step (child, namet (text)),
                     locpath
                       (step (child, namet (listitem)),
                       locpath
                         (step (child, namet (parlist)),
                         locpath
                           (step (child, namet (listitem)),
                           locpath
                             (step (child, namet (parlist)),
                             locpath
                               (step (child,
                                  namet (description)),
                               locpath
                                 (step (child,
                                    namet (annotation)),
                                 locpath
                                   (step (child,
                                      namet (closed_auction)),
                                   locpath
                                     (step (child,
                                        namet
                                          (closed_auctions)),
                                     locpath
                                       (step (child,
                                          namet (site)),
                                       fun_ref (document,
                                         args
                                           (lit_str
                                              ("auction.xml"),
                                           nil ())))))))))))))))),
          nil ()), nil (), nil (),
       elem (tag (text),
         exprseq (varref ($a), empty-seq ()))),
    empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($a),
             locpath (step (child, namet (closed_auction)),
               locpath
                 (step (child, namet (closed_auctions)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()),
       fun_ref (empty,
         args
           (locpath (step (child, kindt (text, nil ())),
              locpath (step (child, namet (keyword)),
                locpath (step (child, namet (emph)),
                  locpath (step (child, namet (text)),
                    locpath (step (child, namet (listitem)),
                      locpath
                        (step (child, namet (parlist)),
                        locpath
                          (step (child, namet (listitem)),
                          locpath
                            (step (child, namet (parlist)),
                            locpath
                              (step (child,
                                 namet (description)),
                              locpath
                                (step (child,
                                   namet (annotation)),
                                varref ($a))))))))))),
           nil ())), nil (),
       elem (tag (person),
         exprseq
           (attr (tag (id),
              exprseq
                (locpath (step (attribute, namet (person)),
                   locpath (step (child, namet (seller)),
                     varref ($a))), empty-seq ())),
           empty-seq ()))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($p),
             locpath (step (child, namet (person)),
               locpath (step (child, namet (people)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()),
       fun_ref (empty,
         args
           (locpath (step (child, kindt (text, nil ())),
              locpath (step (child, namet (homepage)),
                varref ($p))), nil ())), nil (),
       elem (tag (person),
         exprseq
           (locpath (step (child, kindt (text, nil ())),
              locpath (step (child, namet (name)),
                varref ($p))), empty-seq ()))),
    empty-seq ()))
--
xquery
  (prolog (nil (),
     fun_decls
       (fun_decl (convert,
          params (param (nil (), varref ($v)), nil ()),
          nil (),
          exprseq
            (flwr
               (binds
                  (let (nil (), varref ($c),
                     mult (lit_dec (2.2037), varref ($v))),
                  nil ()), nil (), nil (), varref ($c)),
            empty-seq ())), nil ())),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($i),
             locpath (step (child, namet (open_auction)),
               locpath (step (child, namet (open_auctions)),
                 locpath (step (child, namet (site)),
                   fun_ref (document,
                     args (lit_str ("auction.xml"), nil ())))))),
          nil ()), nil (), nil (),
       exprseq
         (locpath (step (child, kindt (text, nil ())),
            locpath (step (child, namet (reserve)),
              varref ($i))), empty-seq ())), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (flwr
       (binds
          (bind (nil (), nil (), varref ($b),
             locpath (step (child, namet (auction)),
               locpath
                 (step (descendant-or-self,
                    kindt (node, nil ())),
                 locpath (step (child, namet (regions)),
                   locpath (step (child, namet (site)),
                     fun_ref (document,
                       args (lit_str ("auction.xml"),
                         nil ()))))))), nil ()), nil (),
       orderby (unstable,
         orderspecs (asc, empty least, default,
           locpath (step (attribute, namet (id)),
             locpath (step (child, namet (item_number)),
               locpath (step (child, namet (item)),
                 locpath (step (child, namet (items)),
                   varref ($b))))), nil ())),
       elem (tag (item),
         exprseq
           (elem (tag (name),
              exprseq
                (locpath
                   (step (child, kindt (text, nil ())),
                   locpath (step (child, namet (name)),
                     locpath
                       (step (descendant-or-self,
                          kindt (node, nil ())),
                       varref ($b)))), empty-seq ())),
           exprseq
             (elem (tag (location),
                exprseq
                  (locpath
                     (step (child, kindt (text, nil ())),
                     locpath
                       (step (child, namet (location)),
                       varref ($b))), empty-seq ())),
             empty-seq ())))), empty-seq ()))
--
xquery (prolog (nil (), nil ()),
  exprseq
    (elem (tag (result),
       exprseq
         (elem (tag (preferred),
            exprseq
              (fun_ref (count,
                 args
                   (locpath
                      (pred
                         (locpath
                            (step (child, namet (profile)),
                            dot ()),
                         ge
                           (locpath
                              (step (attribute,
                                 namet (income)), dot ()),
                           lit_int (100000))),
                      locpath (step (child, namet (person)),
                        locpath
                          (step (child, namet (people)),
                          locpath
                            (step (child, namet (site)),
                            fun_ref (document,
                              args (lit_str ("auction.xml"),
                                nil ())))))), nil ())),
              empty-seq ())),
         exprseq
           (text (exprseq (lit_str (", "), empty-seq ())),
           exprseq
             (elem (tag (standard),
                exprseq
                  (fun_ref (count,
                     args
                       (locpath
                          (pred
                             (locpath
                                (step (child,
                                   namet (profile)),
                                dot ()),
                             and
                               (lt
                                  (locpath
                                     (step (attribute,
                                        namet (income)),
                                     dot ()),
                                  lit_int (100000)),
                               ge
                                 (locpath
                                    (step (attribute,
                                       namet (income)),
                                    dot ()),
                                 lit_int (30000)))),
                          locpath
                            (step (child, namet (person)),
                            locpath
                              (step (child, namet (people)),
                              locpath
                                (step (child, namet (site)),
                                fun_ref (document,
                                  args
                                    (lit_str
                                       ("auction.xml"),
                                    nil ())))))), nil ())),
                  empty-seq ())),
             exprseq
               (text
                  (exprseq (lit_str (", "), empty-seq ())),
               exprseq
                 (elem (tag (challenge),
                    exprseq
                      (fun_ref (count,
                         args
                           (locpath
                              (pred
                                 (locpath
                                    (step (child,
                                       namet (profile)),
                                    dot ()),
                                 lt
                                   (locpath
                                      (step (attribute,
                                         namet (income)),
                                      dot ()),
                                   lit_int (30000))),
                              locpath
                                (step (child,
                                   namet (person)),
                                locpath
                                  (step (child,
                                     namet (people)),
                                  locpath
                                    (step (child,
                                       namet (site)),
                                    fun_ref (document,
                                      args
                                        (lit_str
                                           ("auction.xml"),
                                        nil ())))))),
                           nil ())), empty-seq ())),
                 exprseq
                   (text
                      (exprseq (lit_str (", "),
                         empty-seq ())),
                   exprseq
                     (elem (tag (na),
                        exprseq
                          (fun_ref (count,
                             args
                               (flwr
                                  (binds
                                     (bind (nil (), nil (),
                                        varref ($p),
                                        locpath
                                          (step (child,
                                             namet (person)),
                                          locpath
                                            (step (child,
                                               namet
                                                 (people)),
                                            locpath
                                              (step (child,
                                                 namet
                                                   (site)),
                                              fun_ref
                                                (document,
                                                args
                                                  (lit_str
                                                     ("auction.xml"),
                                                  nil ())))))),
                                     nil ()),
                                  fun_ref (empty,
                                    args
                                      (locpath
                                         (step (attribute,
                                            namet (income)),
                                         varref ($p)),
                                      nil ())), nil (),
                                  varref ($p)), nil ())),
                          empty-seq ())), empty-seq ())))))))),
    empty-seq ()))