xquery (prolog (nil (), nil ()),
  exprseq
    (typeswitch
       (locpath (step (child, namet (foo)), root ()),
       cases
         (case (seq_ty (1, node_ty (element, nil ())),
            nil (), lit_str ("element")),
         cases
           (case
              (seq_ty (1,
                 node_ty (element,
                   req_ty (nil (), named_ty (foo)))),
              nil (), lit_str ("elem of type foo")),
           cases
             (case
                (seq_ty (1,
                   node_ty (element,
                     req_ty (req_name (foo), nil ()))),
                nil (), lit_str ("elem foo")),
             cases
               (case
                  (seq_ty (1,
                     node_ty (element,
                       req_ty (req_name (foo),
                         named_ty (bar)))), nil (),
                  lit_str ("elem foo of type bar")),
               cases
                 (case
                    (seq_ty (1,
                       node_ty (element,
                         req_ty (req_name (foo),
                           schm_path
                             (glob_schm (schema-context),
                             nil ())))), nil (),
                    lit_str ("elem foo in context")),
                 nil ()))))), nil (), lit_str ("default")),
    empty-seq ()))