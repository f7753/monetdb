# a test checking BAT reference counting under various situations
	b:= new(:int,:str);
	i:= getRefCount(b);
	printf("refcount =%d\n",i);
	j:= getLRefCount(b);
	printf("lrefcount =%d\n",j);

	insert(b,1,"bat B");
	print(b);
	i:= getRefCount(b);
	printf("refcount =%d\n",i);
	j:= getLRefCount(b);
	printf("lrefcount =%d\n",j);

	# referenceing through mirroring
	b6:= mirror(b);
	i:= getRefCount(b);
	printf("after mirror assignment refcount =%d\n",i);
	j:= getLRefCount(b);
	printf("lrefcount =%d\n",j);
