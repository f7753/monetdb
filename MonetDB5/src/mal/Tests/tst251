# The series tst2?? is a patched version of suite_00
# The first and foremost BAT operations

b:= new(:int,:int);
insert(b,1,15);
insert(b,2,4);
n0  := int(nil);
insert(b,3,n0);
insert(b,4,16);
insert(b,5,25);
insert(b,6,36);
insert(b,7,49);
insert(b,8,64);
insert(b,9,n0);
insert(b,n0,n0);
insert(b,n0,81);
print(b);
barrier v:= bunStream(b,h,t);
	printf("[ %d,",h);
	printf("%d]\n",t);
	redo v;
exit v;


# String stuff
c:= new(:int,:str);
insert(c,1,"hello");
insert(c,2,"brave");
insert(c,3,"world");
insert(c,4,"");
x:= str(nil);
insert(c,5,x);
insert(c,6,"!");
print(c);
barrier v:= bunStream(c,h,ts:str);
	printf("[%d,",h);
	printf("%s]\n",ts);
	redo v;
exit v;

#Testing a loop over string bats

d:= new(:str,:str);
insert(d,"one","red");
insert(d,"two","green");
print(d);
barrier w:= bunStream(d,hs:str,ts);
	printf("[ %s,",hs);
	printf("%s]\n",ts);
	redo w;
exit w;


