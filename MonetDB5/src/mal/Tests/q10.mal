# Mil compiler Version 1.0)
# Copyright (c) 1993-2001, CWI. All rights reserved.

# Predefined code segment
#
use "kernel/alarm";
#module(alarm); 
#
	tries:= 5;
#var tries := 5;
	rep:= take("rep");
	rep := 0;
#rep := 0;
barrier	aa_a:= true;
	ca_a := <(rep,tries);
barrier	ba_a:= ca_a;
#while (rep < tries) {
	rep := +(rep,1);
#rep := rep+1;
	timer:= time();
#var timer := time();
	monet_guide:= take("monet_guide");
	da_a := find(monet_guide,"site.people.person.profile.interest.category@");
	b0:= bat(da_a);
#var b0 := bat(find(monet_guide,"site.people.person.profile.interest.category@")); 
	ea_a := reverse(b0);
	b1:= kunique(ea_a);
#var b1 := kunique(reverse(b0)); 
	fa_a := find(monet_guide,"site.people.person.profile");
	b2:= bat(fa_a);
#var b2 := bat(find(monet_guide,"site.people.person.profile")); 
	ga_a := find(monet_guide,"site.people.person.profile.interest");
	b3:= bat(ga_a);
#var b3 := bat(find(monet_guide,"site.people.person.profile.interest")); 
	ha_a := find(monet_guide,"site.people.person.profile.interest.category@");
	b4:= bat(ha_a);
#var b4 := bat(find(monet_guide,"site.people.person.profile.interest.category@")); 
	ia_a := find(monet_guide,"site.people.person.name");
	b5:= bat(ia_a);
#var b5 := bat(find(monet_guide,"site.people.person.name")); 
	ja_a := find(monet_guide,"site.people.person.name.cdata");
	b6:= bat(ja_a);
#var b6 := bat(find(monet_guide,"site.people.person.name.cdata")); 
	ka_a := find(monet_guide,"site.people.person.name.cdata.string@");
	b7:= bat(ka_a);
#var b7 := bat(find(monet_guide,"site.people.person.name.cdata.string@")); 
	la_a := join(b6,b7);
	b8:= join(b6,la_a);
#var b8 := join(b6,join(b6,b7)); 
	ma_a := find(monet_guide,"site.people.person.emailaddress");
	b9:= bat(ma_a);
#var b9 := bat(find(monet_guide,"site.people.person.emailaddress")); 
	na_a := find(monet_guide,"site.people.person.emailaddress.cdata");
	b10:= bat(na_a);
#var b10 := bat(find(monet_guide,"site.people.person.emailaddress.cdata")); 
#var b11 :=
	oa_a := find(monet_guide,"site.people.person.emailaddress.cdata.string@");
	b11:= bat(oa_a);
#bat(find(monet_guide,"site.people.person.emailaddress.cdata.string@")) ;
	pa_a := join(b10,b11);
	b12:= join(b9,pa_a);
#var b12 := join(b9,join(b10,b11)); 
	qa_a := find(monet_guide,"site.people.person.phone");
	b13:= bat(qa_a);
#var b13 := bat(find(monet_guide,"site.people.person.phone")); 
	ra_a := find(monet_guide,"site.people.person.phone.cdata");
	b14:= bat(ra_a);
#var b14 := bat(find(monet_guide,"site.people.person.phone.cdata")); 
	sa_a := find(monet_guide,"site.people.person.phone.cdata.string@");
	b15:= bat(sa_a);
#var b15 := bat(find(monet_guide,"site.people.person.phone.cdata.string@")); 
	ta_a := join(b14,b15);
	b16:= join(b13,ta_a);
#var b16 := join(b13,join(b14,b15)); 
	ua_a := find(monet_guide,"site.people.person.homepage");
	b17:= bat(ua_a);
#var b17 := bat(find(monet_guide,"site.people.person.homepage")); 
	va_a := find(monet_guide,"site.people.person.homepage.cdata");
	b18:= bat(va_a);
#var b18 := bat(find(monet_guide,"site.people.person.homepage.cdata")); 
	wa_a := find(monet_guide,"site.people.person.homepage.cdata.string@");
	b19:= bat(wa_a);
#var b19 := bat(find(monet_guide,"site.people.person.homepage.cdata.string@")); 
	xa_a := join(b18,b19);
	b20:= join(b17,xa_a);
#var b20 := join(b17,join(b18,b19)); 
	ya_a := find(monet_guide,"site.people.person.creditcard");
	b21:= bat(ya_a);
#var b21 := bat(find(monet_guide,"site.people.person.creditcard")); 
	ab_a := find(monet_guide,"site.people.person.creditcard.cdata");
	b22:= bat(ab_a);
#var b22 := bat(find(monet_guide,"site.people.person.creditcard.cdata")); 
	bb_a := find(monet_guide,"site.people.person.creditcard.cdata.string@");
	b23:= bat(bb_a);
#var b23 := bat(find(monet_guide,"site.people.person.creditcard.cdata.string@")); 
	cb_a := join(b22,b23);
	b24:= join(b21,cb_a);
#var b24 := join(b21,join(b22,b23)); 
	db_a := find(monet_guide,"site.people.person.profile");
	b25:= bat(db_a);
#var b25 := bat(find(monet_guide,"site.people.person.profile")); 
	eb_a := find(monet_guide,"site.people.person.profile.income@");
	b26:= bat(eb_a);
#var b26 := bat(find(monet_guide,"site.people.person.profile.income@")); 
	b27:= join(b25,b26);
#var b27 := join(b25,b26);
	fb_a := find(monet_guide,"site.people.person.profile.education");
	b28:= bat(fb_a);
#var b28 := bat(find(monet_guide,"site.people.person.profile.education")); 
	gb_a := find(monet_guide,"site.people.person.profile.education.cdata");
	b29:= bat(gb_a);
#var b29 := bat(find(monet_guide,"site.people.person.profile.education.cdata")); 
	hb_a := find(monet_guide,"site.people.person.profile.education.cdata.string@");
	b30:= bat(hb_a);
#var b30 := bat(find(monet_guide,"site.people.person.profile.education.cdata.string@"));
	ib_a := join(b29,b30);
	b31:= join(b28,ib_a);
#var b31 := join(b28,join(b29,b30)); 
	jb_a := find(monet_guide,"site.people.person.profile.business");
	b32:= bat(jb_a);
#var b32 := bat(find(monet_guide,"site.people.person.profile.business")); 
	kb_a := find(monet_guide,"site.people.person.profile.business.cdata");
	b33:= bat(kb_a);
#var b33 := bat(find(monet_guide,"site.people.person.profile.business.cdata")); 
	lb_a := find(monet_guide,"site.people.person.profile.business.cdata.string@ ");
	b34:= bat(lb_a);
#var b34 := bat(find(monet_guide,"site.people.person.profile.business.cdata.string@ "));
	mb_a := join(b33,b34);
	b35:= join(b32,mb_a);
#var b35 := join(b32,join(b33,b34)); 
	nb_a := find(monet_guide,"site.people.person.address");
	b36:= bat(nb_a);
#var b36 := bat(find(monet_guide,"site.people.person.address")); 
	ob_a := find(monet_guide,"site.people.person.address.street");
	b37:= bat(ob_a);
#var b37 := bat(find(monet_guide,"site.people.person.address.street")); 
	pb_a := find(monet_guide,"site.people.person.address.street.cdata");
	b38:= bat(pb_a);
#var b38 := bat(find(monet_guide,"site.people.person.address.street.cdata")); 
	qb_a := find(monet_guide,"site.people.person.address.street.cdata.string@");
	b39:= bat(qb_a);
#var b39 := bat(find(monet_guide,"site.people.person.address.street.cdata.string@"));
	rb_a := join(b38,b39);
	sb_a := join(b37,rb_a);
	b40:= join(b36,sb_a);
#var b40 := join(b36,join(b37,join(b38,b39))); 
	tb_a := find(monet_guide,"site.people.person.address.city");
	b41:= bat(tb_a);
#var b41 := bat(find(monet_guide,"site.people.person.address.city")); 
	ub_a := find(monet_guide,"site.people.person.address.city.cdata");
	b42:= bat(ub_a);
#var b42 := bat(find(monet_guide,"site.people.person.address.city.cdata")); 
	vb_a := find(monet_guide,"site.people.person.address.city.cdata.string@");
	b43:= bat(vb_a);
#var b43 := bat(find(monet_guide,"site.people.person.address.city.cdata.string@")) ;
	wb_a := join(b42,b43);
	xb_a := join(b41,wb_a);
	b44:= join(b36,xb_a);
#var b44 := join(b36,join(b41,join(b42,b43))); 
	yb_a := find(monet_guide,"site.people.person.address.country");
	b45:= bat(yb_a);
#var b45 := bat(find(monet_guide,"site.people.person.address.country")); 
	ac_a := find(monet_guide,"site.people.person.address.country.cdata");
	b46:= bat(ac_a);
#var b46 := bat(find(monet_guide,"site.people.person.address.country.cdata")); 
	bc_a := find(monet_guide,"site.people.person.address.country.cdata.string@");
	b47:= bat(bc_a);
#var b47 := bat(find(monet_guide,"site.people.person.address.country.cdata.string@"));
	cc_a := join(b46,b47);
	dc_a := join(b45,cc_a);
	b48:= join(b36,dc_a);
#var b48 := join(b36,join(b45,join(b46,b47))); 
	ec_a := find(monet_guide,"site.people.person.address.province");
	b49:= bat(ec_a);
#var b49 := bat(find(monet_guide,"site.people.person.address.province")); 
	fc_a := find(monet_guide,"site.people.person.address.province.cdata");
	b50:= bat(fc_a);
#var b50 := bat(find(monet_guide,"site.people.person.address.province.cdata")); 
	gc_a := find(monet_guide,"site.people.person.address.province.cdata.string@");
	b51:= bat(gc_a);
#var b51 := bat(find(monet_guide,"site.people.person.address.province.cdata.string@"));
	hc_a := join(b50,b51);
	ic_a := join(b49,hc_a);
	b52:= join(b36,ic_a);
#var b52 := join(b36,join(b49,join(b50,b51))); 
	jc_a := find(monet_guide,"site.people.person.address.zipcode");
	b53:= bat(jc_a);
#var b53 := bat(find(monet_guide,"site.people.person.address.zipcode")); 
	kc_a := find(monet_guide,"site.people.person.address.zipcode.cdata");
	b54:= bat(kc_a);
#var b54 := bat(find(monet_guide,"site.people.person.address.zipcode.cdata")); 
	lc_a := find(monet_guide,"site.people.person.address.zipcode.cdata.string@");
	b55:= bat(lc_a);
#var b55 := bat(find(monet_guide,"site.people.person.address.zipcode.cdata.string@"));
	mc_a := join(b54,b55);
	nc_a := join(b53,mc_a);
	b56:= join(b36,nc_a);
#var b56 := join(b36,join(b53,join(b54,b55))); 
	oc_a := find(monet_guide,"site.people.person.profile.gender");
	b57:= bat(oc_a);
#var b57 := bat(find(monet_guide,"site.people.person.profile.gender")); 
	pc_a := find(monet_guide,"site.people.person.profile.gender.cdata");
	b58:= bat(pc_a);
#var b58 := bat(find(monet_guide,"site.people.person.profile.gender.cdata")); 
#var b59 :=
	qc_a := find(monet_guide,"site.people.person.profile.gender.cdata.string@");
	b59:= bat(qc_a);
#bat(find(monet_guide,"site.people.person.profile.gender.cdata.string@") );
	rc_a := join(b58,b59);
	sc_a := join(b57,rc_a);
	b60:= join(b36,sc_a);
#var b60 := join(b36,join(b57,join(b58,b59))); 
	tc_a := find(monet_guide,"site.people.person.profile.age");
	b61:= bat(tc_a);
#var b61 := bat(find(monet_guide,"site.people.person.profile.age")); 
	uc_a := find(monet_guide,"site.people.person.profile.age.cdata");
	b62:= bat(uc_a);
#var b62 := bat(find(monet_guide,"site.people.person.profile.age.cdata")); 
	vc_a := find(monet_guide,"site.people.person.profile.age.cdata.string@");
	b63:= bat(vc_a);
#var b63 := bat(find(monet_guide,"site.people.person.profile.age.cdata.string@")); 
	wc_a := join(b62,b63);
	xc_a := join(b61,wc_a);
	b64:= join(b36,xc_a);
#var b64 := join(b36,join(b61,join(b62,b63))); 
	yc_a_cursor := 0:lng;
barrier	yc_a:= batloop(yc_a_cursor,b1,yc_aH,yc_aT);
#b1@batloop() {
	ad_a := printf("<category>\n<id> %s </id>\n",yc_aH);
#printf("<category>\n<id> %s </id>\n", $h); 
	b65:= select(b4,yc_aH);
#var b65 := select(b4,$h);
	bd_a := join(b3,b65);
	b66:= join(b2,bd_a);
#var b66 := join(b2,join(b3,b65)); 
	cd_a_cursor := 0:lng;
barrier	cd_a:= batloop(cd_a_cursor,b66,cd_aH,cd_aT);
#b66@batloop() {
	id:= cd_aH;
#var id := $h;
	gender:= "";
#var gender := "";
barrier	dd_a:= exist(b60,id);
	gender := find(b60,id);
#if (exist(b60,id)) { gender := find(b60,id); } 
end	dd_a;
	age:= "";
#var age := "";
barrier	ed_a:= exist(b64,id);
	age := find(b64,id);
#if (exist(b64,id)) { age := find(b64,id); } 
end	ed_a;
	education:= "";
#var education := ""; 
barrier	fd_a:= exist(b31,id);
	education := find(b31,id);
#if (exist(b31,id)) { education := find(b31,id); } 
end	fd_a;
	income:= "";
#var income := ""; 
barrier	gd_a:= exist(b27,id);
	income := find(b27,id);
#if (exist(b27,id)) { income := find(b27,id); } 
end	gd_a;
	name:= "";
#var name := "";
barrier	hd_a:= exist(b8,id);
	name := find(b8,id);
#if (exist(b8,id)) { name := find(b8,id); } 
end	hd_a;
	street:= "";
#var street := ""; 
barrier	id_a:= exist(b40,id);
	street := find(b40,id);
#if (exist(b40,id)) { street := find(b40,id); } 
end	id_a;
	city:= "";
#var city := "";
barrier	jd_a:= exist(b44,id);
	city := find(b44,id);
#if (exist(b44,id)) { city := find(b44,id); } 
end	jd_a;
	country:= "";
#var country := ""; 
barrier	kd_a:= exist(b48,id);
	country := find(b48,id);
#if (exist(b48,id)) { country := find(b48,id); } 
end	kd_a;
	province:= "";
#var province := ""; 
barrier	ld_a:= exist(b52,id);
	province := find(b52,id);
#if (exist(b52,id)) { province := find(b52,id); } 
end	ld_a;
	email:= "";
#var email := "";
barrier	md_a:= exist(b12,id);
	email := find(b12,id);
#if (exist(b12,id)) { email := find(b12,id); } 
end	md_a;
	homepage:= "";
#var homepage := ""; 
barrier	nd_a:= exist(b20,id);
	homepage := find(b20,id);
#if (exist(b20,id)) { homepage := find(b20,id); } 
end	nd_a;
	creditcard:= "";
#var creditcard := ""; 
barrier	od_a:= exist(b24,id);
	creditcard := find(b24,id);
#if (exist(b24,id)) { creditcard := find(b24,id); } 
end	od_a;
	pd_a := printf("<personne>\n");
#printf ("<personne>\n"); 
	qd_a := printf("<statistiques>\n");
#printf ("<statistiques>\n"); 
	rd_a := printf("<sexe> %s </sexe>\n",gender);
#printf ("<sexe> %s </sexe>\n", gender); 
	sd_a := printf("<age> %s </age>\n",age);
#printf ("<age> %s </age>\n", age); 
	td_a := printf("<education> %s </education>\n",education);
#printf ("<education> %s </education>\n", education); 
	ud_a := printf("<income> %s </income>\n",income);
#printf ("<income> %s </income>\n", income); 
	vd_a := printf("</statistiques>\n");
#printf ("</statistiques>\n"); 
	wd_a := printf("<coordonnees>\n");
#printf ("<coordonnees>\n"); 
	xd_a := printf("<nom> %s </nom>\n",name);
#printf ("<nom> %s </nom>\n", name); 
	yd_a := printf("<rue> %s </rue>\n",street);
#printf ("<rue> %s </rue>\n", street); 
	ae_a := printf("<ville> %s </ville>\n",city);
#printf ("<ville> %s </ville>\n", city); 
	be_a := printf("<pays> %s </pays>\n",country);
#printf ("<pays> %s </pays>\n", country); 
	ce_a := printf("<reseau>\n");
#printf ("<reseau>\n"); 
	de_a := printf("<courrier> %s </courrier>\n",email);
#printf ("<courrier> %s </courrier>\n", email); 
	ee_a := printf("<pagePerso> %s </pagePerso>\n",homepage);
#printf ("<pagePerso> %s </pagePerso>\n", homepage); 
	fe_a := printf("</reseau>\n");
#printf ("</reseau>\n"); 
	ge_a := printf("</coordonnees>\n");
#printf ("</coordonnees>\n"); 
	he_a := printf("<creditcard> %s </creditcard>\n",creditcard);
#printf ("<creditcard> %s </creditcard>\n", creditcard); 
	ie_a := printf("</personne>\n");
#printf ("</personne>\n"); 
redo	cd_a;
end	cd_a;
#}
	je_a := printf("</category>\n");
#printf ("</category>\n"); 
redo	yc_a;
end	yc_a;
#}
	ke_a := "###Query10# (%i): %i msec\n";
	le_a := time();
	me_a := -(le_a,timer);
	ne_a := printf(ke_a,rep,me_a);
#printf("###Query10# (%i): %i msec\n", rep, time()-timer); 
redo	aa_a;
end	ba_a;
end	aa_a;
#}
#
