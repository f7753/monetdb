#The 2000 serie  is focussed on parallelism

function clkticks(n:int):void;
barrier	b:= n>0;
	io.printf("#clock tick %d\n",n);
	alarm.sleep(5);
	n:= n-1;
	redo b:=n>0;
exit	b;
end clkticks;

thread 	hdl:=0;	# synchronize through a boolean
	user.clkticks(2);
exit	hdl;
io.printf("#Main thread\n");
io.printf("#Wait for child to exit\n");
