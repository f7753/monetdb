# determine basic costs for cracking a larger table.
b:= new(:int,:int);
i:= -1:int;
barrier v:= nextElement(i,0:int,1000000:int);
        k:= rand();
        l:= int(k);
        insert(b,l,l);
        redo v;
exit v;
#setReadMode(b);
mx:= max(b);
printf("max %d",mx);
mi:= min(b);
printf(" min %d\n",mi);
t0:= alarm.usec();
c:= copy(b);
t1:= alarm.usec();
d0:= t1-t0;
printf("#copy %d\n",d0);

t0:= alarm.usec();
(cidx,vrng):= crackers.new(b);
t1:= alarm.usec();
d0:= t1-t0;
printf("#crack init %d\n",d0);
#print(vrng);

l:= mi*2;
h:= mx/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
z:= crackers.crack(b,cidx,vrng,l,h);
t1:= alarm.usec();
#print(vrng);
d0:= t1-t0;
printf("#crack %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
y:= crackers.crack(b,cidx,vrng,l,h);
#print(vrng);
t1:= alarm.usec();
d0:= t1-t0;
printf("#crack %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
y:= crackers.crack(b,cidx,vrng,l,h);
#print(vrng);
t1:= alarm.usec();
d0:= t1-t0;
printf("#crack %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
y:= crackers.crack(b,cidx,vrng,l,h);
#print(vrng);
t1:= alarm.usec();
d0:= t1-t0;
printf("#crack %d\n",d0);
print(cidx);
print(vrng);

# Compare cracker with ordinary selection
t0:= alarm.usec();
i:= max(b);
t1:= alarm.usec();
d0:= t1-t0;
printf("#max %d\n",d0);
t0:= alarm.usec();
i:= min(b);
t1:= alarm.usec();
d0:= t1-t0;
printf("#min %d\n",d0);

l:= mi*2;
h:= mx/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
printf("#select %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
printf("#select %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
printf("#select %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
printf("#select %d\n",d0);
