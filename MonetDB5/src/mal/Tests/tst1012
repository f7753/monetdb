# the first of a series of BBP test cases

bbp.open();
b:= new(int,int);
insert(b,1,2);
bbp.deposit("mysecondbat",b);
c:= bbp.take("mysecondbat");
print(c);
bbp.setPersistent(b);
x:= bbp.isPersistent(b);
y:= bbp.isSession(b);
z:= bbp.isTransient(b);
print(x); print(y); print(z); print("");
bbp.setTransient(b);
x:= bbp.isPersistent(b);
y:= bbp.isSession(b);
z:= bbp.isTransient(b);
print(x); print(y); print(z); print("");
bbp.close();
# at the end of the session, the BBP should have discarded
# the temporary bats of the user
# aug 02 this does not work, because the transaction is
# not properly closed. This means that a temporary bat
#remains in store.
bbp.open();
#v:= bbp.take("mysecondbat");
print(v);
bbp.close();
