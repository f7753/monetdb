#The 2000 serie  is focussed on parallelism
#we start with a non-parallel version

function clkticks(n:int):void;
barrier	b:= n>0;
	io.printf("clock tick\n");
	alarm.sleep(2);
	n:= n-1;
redo	b:= n>0;
exit	b;
end clkticks;

# trace all instructions executed with timing information
mdb.setTimer(true);
mdb.setTrace("user","clkticks",true);
user.clkticks(2);
