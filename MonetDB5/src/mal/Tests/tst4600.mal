# the first test for macro expansions and inversions
macro welcome(lim:int):void;
    i:= 0;
barrier j:= i<lim;
    print("Welcome");
    i:= i+1;
    redo j:= i<lim;
exit j;
end welcome;

orcam joinPath( a:bat[:any$1,:any$2],
                b:bat[:any$2,:any$3],
                c:bat[:any$3,:any4]):bat[:any$1,:any$4];
    z:= join(a,b);
    zz:= join(z,c);
end joinPath;

# here starts the actual test
MACROprocessor();
ORCAMprocessor();

print("this is a test");
welcome(2);

print("test inversion");
a:= new(:int,:int);
b:= new(:int,:int);
c:= new(:int,:int);
g:= join(a,b);
h:= join(g,c);

showFunction();
