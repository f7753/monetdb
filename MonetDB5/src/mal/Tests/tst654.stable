# Monet Database Server V5.0
# Copyright (c) 1993-2004, CWI. All rights reserved.
# compiled for 32biti686-pc-linux-gnu/32bit.
# config:/ufs/mk/monet5/src/mal/Tests/tst.conf
# dbfarm:/ufs/mk/monet5/Linux/var/MonetDB
# dbname:demo
## An extensive test for the new tablet layout
#mdb('T');
#tablet.display(2,"strong");
#tablet.display(2,"strong",true);
#first:=1;
#last:= 2;
#tablet.display(first,last);
#
#tablet.setFormat(first,last);
#tablet.setProperties("name,type");
#tablet.setColumnName(0,"Eerste");
##tablet.setRowBracket("|","|");
#
#b1:= new(:void,:int);
#insert(b1,42);
#insert(b1,49);
#b2:= new(:void,:str);
#insert(b2,"hello world");
#insert(b2,"goodbye world");
#
#tablet.setProperties("name,type,dense,sorted,key,min,max");
#tablet.display(b1,b2);
#
#in:= int(nil);
#insert(b1,in);
#insert(b2,sn);
#tablet.setProperties(sn);
#tablet.setColumnDecimal(0,3,1);
#tablet.setColumnNull(1,"unknown");
#tablet.display(b1,b2);
#
#sn := str(nil);
#tablet.setTableBracket("<rowset>","</rowset>");
#tablet.setRowBracket("<row>","</row>");
#tablet.setColumnBracket(0,"<age>","</age>");
#tablet.setColumnBracket(1,"<title>","</title>");
#tablet.page(b1,b2);
#
##leftover typeing
##function someone(i:any...);
##print("good");
##end someone;
##someone(2,"strong");
##someone(2,"strong",true);
##someone(1,2);
##b:= new(void,int);
#
function Admin.main():int;	# 0  (main:int)
    inspect.mdb('T');	# 1 mdbSetCmd ($1:void)<-($2:chr)
    tablet.display(2,strong);	# 2 TABdisplayRow ($3:int)<-($4:any)($5:any)
    tablet.display(2,strong,true);	# 3 TABdisplayRow ($6:int)<-($4:any)($5:any)($7:any)
    first := 1;	# 4  (first:int)<-($9:int)
    last := 2;	# 5  (last:any)<-($4:any)
    tablet.display(first,last);	# 6 TABdisplayRow ($11:int)<-(first:int)(last:any)
    tablet.setFormat(first,last);	# 7 TABsetFormat ($12:void)<-(first:int)(last:any)
    tablet.setProperties("name,type");	# 8 TABsetProperties ($13:int)<-($14:str)
    tablet.setColumnName(0,"Eerste");	# 9 TABsetColumnName ($15:void)<-($16:int)($17:str)
    b1 := bbp.new(void:,int:);	# 10 CMDBATnew (b1:bat[:void,:int])<-($19:void)($20:int)
    bat.insert(b1,42);	# 11 BKCinsert_void_bun ($21:void)<-(b1:bat[:void,:int])($22:int)
    bat.insert(b1,49);	# 12 BKCinsert_void_bun ($23:void)<-(b1:bat[:void,:int])($24:int)
    b2 := bbp.new(void:,str:);	# 13 CMDBATnew (b2:bat[:void,:str])<-($26:void)($27:str)
    bat.insert(b2,"hello world");	# 14 BKCinsert_void_bun ($28:void)<-(b2:bat[:void,:str])($29:str)
    bat.insert(b2,"goodbye world");	# 15 BKCinsert_void_bun ($30:void)<-(b2:bat[:void,:str])($31:str)
    tablet.setProperties("name,type,dense,sorted,key,min,max");	# 16 TABsetProperties ($32:int)<-($33:str)
    tablet.display(b1,b2);	# 17 TABdisplayTable ($34:int)<-(b1:bat[:void,:int])(b2:bat[:void,:str])
    in := calc.int(nil);	# 18 CALCnil2int (in:int)<-($36:void)
    bat.insert(b1,in);	# 19 BKCinsert_void_bun ($37:void)<-(b1:bat[:void,:int])(in:int)
    bat.insert(b2,sn);	# 20 BKCinsert_void_bun ($38:void)<-(b2:bat[:void,:str])(sn:str)
    tablet.setProperties(sn);	# 21 TABsetProperties ($40:int)<-(sn:str)
    tablet.setColumnDecimal(0,3,1);	# 22 TABsetColumnDecimal ($41:void)<-($16:int)($42:int)($43:int)
    tablet.setColumnNull(1,"unknown");	# 23 TABsetColumnNull ($44:void)<-($43:int)($45:str)
    tablet.display(b1,b2);	# 24 TABdisplayTable ($46:int)<-(b1:bat[:void,:int])(b2:bat[:void,:str])
    sn := calc.str(nil);	# 25 CALCnil2str (sn:str)<-($36:void)
    tablet.setTableBracket("<rowset>","</rowset>");	# 26 TABsetTableBracket ($47:void)<-($48:str)($49:str)
    tablet.setRowBracket("<row>","</row>");	# 27 TABsetRowBracket ($50:void)<-($51:str)($52:str)
    tablet.setColumnBracket(0,"<age>","</age>");	# 28 TABsetColumnBracket ($53:void)<-($54:int)($55:str)($56:str)
    tablet.setColumnBracket(1,"<title>","</title>");	# 29 TABsetColumnBracket ($57:void)<-($43:int)($58:str)($59:str)
    tablet.page(b1,b2);	# 30 TABpage ($60:int)<-(b1:bat[:void,:int])(b2:bat[:void,:str])
end main;	# 31  
#Monet Debugger on
#mdb     tablet.display(2,"strong")
#-----------------------#
# $4,	$5		# name
#-----------------------#
[ 2,	"strong"	]
#-----------------------#
#mdb     tablet.display(2,"strong",true)
#-------------------------------#
# $4,	$5,		$7	# name
#-------------------------------#
[ 2,	"strong",	true	]
#-------------------------------#
#mdb     first := 1;
#mdb     last := 2;
#mdb     tablet.display(1,2)
#-----------------------#
# first,	last	# name
#-----------------------#
[ 1,		2	]
#-----------------------#
#mdb     tablet.setFormat(1,2)
#mdb     tablet.setProperties("name,type")
#mdb     tablet.setColumnName(0,"Eerste")
#mdb     b1 := bbp.new(0@0,0)
#mdb     bat.insert(<tmp_4>,42)
#mdb     bat.insert(<tmp_4>,49)
#mdb     b2 := bbp.new(0@0,nil)
#mdb     bat.insert(<tmp_5>,"hello world")
#mdb     bat.insert(<tmp_5>,"goodbye world")
#mdb     tablet.setProperties("name,type,dense,sorted,key,min,max")
#mdb     tablet.display(<tmp_4>,<tmp_5>)
#---------------------------------------#
# tmp_4,	tmp_5			# name
# int,		str			# type
# false,	false			# dense
# true,		false			# sorted
# true,		false			# key
# 42,					# min
# 49,					# max
#---------------------------------------#
[ 42,		"hello world"		]
[ 49,		"goodbye world"		]
#---------------------------------------#
#mdb     in := calc.int(nil)
#mdb     bat.insert(<tmp_4>,nil)
#mdb     bat.insert(<tmp_5>,nil)
#mdb     tablet.setProperties(nil)
#mdb     tablet.setColumnDecimal(0,3,1)
#mdb     tablet.setColumnNull(1,"unknown")
#mdb     tablet.display(<tmp_4>,<tmp_5>)
#---------------------------------------#
# tmp_4,	tmp_5			# name
#---------------------------------------#
[  4.2,		"hello world"		]
[  4.9,		"goodbye world"		]
[  nil,		unknown			]
#---------------------------------------#
#mdb     sn := calc.str(nil)
#mdb     tablet.setTableBracket("<rowset>","</rowset>")
#mdb     tablet.setRowBracket("<row>","</row>")
#mdb     tablet.setColumnBracket(0,"<age>","</age>")
#mdb     tablet.setColumnBracket(1,"<title>","</title>")
#mdb     tablet.page(<tmp_4>,<tmp_5>)
<rowset><row><age> 4.2</age>	<title>"hello world"</title>		</row>
<row><age> 4.9</age>	<title>"goodbye world"</title>		</row>
<row><age> nil</age>	<title>unknown</title>			</row>
</rowset>
#mdb end main;
>