#Same as tst270, but includes testing of the profiler trace

profiler.activate("ticks");
#profiler.activate("pc");
profiler.activate("statement");
profiler.setFilter("*","insert");

o:=oid(20000000);
setoid(o);
b:= new(:int,:int);
#test basic functionality of the BAT library.
#focussed on integers
#it includes insertions,deletions,selections, and joins.

profiler.startTrace();
err := insert(b,1,15);
err := insert(b,2,4);
n0  := int(nil);
err := insert(b,3,n0);
err := insert(b,4,16);
err := insert(b,5,25);
err := insert(b,6,36);
err := insert(b,7,49);
err := insert(b,8,64);
err := insert(b,9,n0);
err := insert(b,n0,n0);
err := insert(b,n0,81);
print(b);
print(b,b,b);
profiler.stopTrace();
printf("#~BeginVariableOutput~#\n");
t:= profiler.getTrace("ticks");
print(t);
s:= profiler.getTrace("statement");
print(s);
print(t,s);
printf("#~EndVariableOutput~#\n");
