# a test checking BAT reference counting under various situations
	bbp.open();
	b:= bbp.new(:int,:str);
	i:= bbp.getRefCount(b);
	io.printf("refcount =%d\n",i);
	j:= bbp.getLRefCount(b);
	io.printf("lrefcount =%d\n",j);

	bat.insert(b,1,"bat B");
	io.print(b);
	i:= bbp.getRefCount(b);
	io.printf("refcount =%d\n",i);
	j:= bbp.getLRefCount(b);
	io.printf("lrefcount =%d\n",j);

	bbp.destroy(b);
	i:= bbp.getRefCount(b);
catch MALexception;
	io.print("bat was destroyed");
exit MALexception;
