# a test checking BAT reference counting under various situations
	bbp.open();
	b:= new(:int,:str);
	i:= getRefCount(b);
	printf("refcount =%d\n",i);
	j:= getLRefCount(b);
	printf("lrefcount =%d\n",j);

	insert(b,1,"bat B");
	print(b);
	i:= getRefCount(b);
	printf("refcount =%d\n",i);
	j:= getLRefCount(b);
	printf("lrefcount =%d\n",j);

	bbp.destroy(b);
	i:= getRefCount(b);
catch MALexception;
	print("bat was destroyed");
exit MALexception;
