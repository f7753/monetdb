@f mil_commands
@t MIL backward compatability
@a Martin Kersten
@* Introduction
The old-fashioned enquire operators are defined for backward
compliance only.
@mal
function modules():void;
        t:= scopeNames();
        print(t);
end modules;

function cpu():bat[str,int];
	v:= cpuStatistics();
        return v;
end cpu;
function memory():bat[str,int];
	v:= memStatistics();
        return v;
end memory;
function io():bat[str,int];
	v:= ioStatistics();
        return v;
end io;
function bbp():bat[str,int];
	v:= bbpStatistics();
        return v;
end bbp;

function dir(b:bat[int,str]):void;
	atm:= catalog.atomNames();
	brev:= reverse(b);
	bm := mirror(brev);
	h := catalog.bbpHeadType();
	bHead:= join(brev,h);
	setName(bHead,"htype");
	h := catalog.bbpTailType();
	bTail:= join(brev,h);
	setName(bTail,"ttype");
	bcount:= catalog.bbpCount();
	bCount:= join(brev,bcount);
	setName(bCount,"count");
	bheat:= catalog.bbpHeat();
	bHeat:= join(brev,bheat);
	setName(bHeat,"heat");
	bdirty:= catalog.bbpDirty();
	bDirty:= join(brev,bdirty);
	setName(bDirty,"dirty");
	bstatus:= catalog.bbpDirty();
	bStatus:= join(brev,bstatus);
	setName(bStatus,"status");
	bkind:= catalog.bbpKind();
	bKind:= join(brev,bkind);
	setName(bKind,"kind");
	bref:= catalog.bbpRefcnt();
	bRef:= join(brev,bref);
	setName(bRef,"refcnt");
	table(brev, bm, bHead,bTail,bCount, bHeat,bDirty,bStatus,bKind,bRef);
end dir;

function dir(s:str):void;
	t:= catalog.bbpNames();
	tn:= like(t,s);
	print(tn);
	dir(tn);
end dir;
function dir():void;
	t:= catalog.bbpNames();
	dir(t);
end dir;

function ls():void;
	nme:= catalog.bbpNames();
	sc_a := catalog.bbpKind();
	tc_a := select(sc_a,"persistent");
	prs:= semijoin(nme,tc_a);
	uc_a := int(nil);
	vc_a := reverse(nme);
	wc_a := select(vc_a,uc_a,-1);
	xc_a := multiplex.tactics("*",wc_a,-1);
	rev:= reverse(xc_a);
	yc_a := setWriteMode(prs);
	ad_a := setColumn(yc_a,"name");
	bd_a := replace(ad_a,rev);
	cd_a := dir(bd_a);
end ls;

function ls(substr:str):void;
	dd_a := catalog.bbpNames();
	nme:= like(dd_a,substr);
	ed_a := catalog.bbpKind();
	fd_a := select(ed_a,"persistent");
	prs:= semijoin(nme,fd_a);
	gd_a := int(nil);
	hd_a := reverse(nme);
	id_a := select(hd_a,gd_a,-1);
	jd_a := multiplex.tactics("*",id_a,-1);
	rev:= reverse(jd_a);
	kd_a := setWriteMode(prs,);
	ld_a := setColumn(kd_a,"name");
	md_a := replace(ld_a,rev);
	nd_a := dir(md_a);
end ls;
