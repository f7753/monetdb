#testing the BAT partition table
a1:= new(:void,:int);
setSequenceBase(a1,0@0);
a2:= new(:void,:int);
setSequenceBase(a2,10@0);
a3:= new(:void,:int);
setSequenceBase(a3,20@0);

barrier (go,i):= newRange(0);
	bat.insert(a1,nil,i);
	bat.insert(a2,nil,i);
	bat.insert(a3,nil,i);
	redo (go,i):= nextElement(1,10);
exit (go,i);
print(a1);
print(a2);
print(a3);

# add the stuff to the BPT and dump it
barrier idx:= partitions.newIterator();
	print(idx);
	redo idx:= partitions.hasMoreElements();
exit idx;

# now really add it
partitions.deposit(a1);
partitions.deposit(a1,a2);
partitions.deposit(a1,a3);
partitions.dump();
barrier idx:= partitions.newIterator();
	print(idx);
	b:= partitions.take(idx);
	print(b);
	redo idx:= partitions.hasMoreElements();
exit idx;
